@model Blog.ViewModels.IndexViewModel
@{
    ViewData["Title"] = "Все пользователи";
}



<a asp-action="create">Добавить пользователя</a>
<form method="get" asp-action="index">
    <div class="form-inline form-group">

        <label class="control-label">ID: </label>
        <input name="id" type="number" min="1" value="@Model.FilterViewModel.SelectId" class=" form-control" />

        <label class="control-label">Эл. почта: </label>
        <input type="text" name="email" value="@Model.FilterViewModel.SelectEmail" class="form-control" />

        <label class="control-label">Логин: </label>
        <input type="text" name="login" value="@Model.FilterViewModel.SelectLogin" class="form-control" />

        <button type="submit" margin-left="10" class="btn" tittle="Поиск"><img src="~/res/Лупа.png" height="35" padding="0" /></button>
        <!--<input type="submit" value="Поиск" class="btn btn-outline-dark"  /> -->
    </div>
</form>
<table class="table">
    <tr>
        <td>
            <a asp-action="Index" asp-route-sortOrder="@Model.SortViewModel.IdSort"
               asp-route-id="@(Model.FilterViewModel.SelectId)"
               asp-route-login="@(Model.FilterViewModel.SelectLogin)"
               asp-route-email="@(Model.FilterViewModel.SelectEmail)"
               id="Column_ID">
                ID
            </a>
        </td>
        <td>
            <a asp-action="Index" asp-route-sortOrder="@Model.SortViewModel.EmailSort"
               asp-route-id="@(Model.FilterViewModel.SelectId)"
               asp-route-login="@(Model.FilterViewModel.SelectLogin)"
               asp-route-email="@(Model.FilterViewModel.SelectEmail)">
                Эл. почта
            </a>
        </td>
        <td>
            <a asp-action="Index" asp-route-sortOrder="@Model.SortViewModel.LoginSort"
               asp-route-id="@(Model.FilterViewModel.SelectId)"
               asp-route-login="@(Model.FilterViewModel.SelectLogin)"
               asp-route-email="@(Model.FilterViewModel.SelectEmail)">
                Логин
            </a>
        </td>
        <td>
            <a asp-action="Index">
                Имя
            </a>
        </td>
        <td>
            <a asp-action="Index">
                Фамилия
            </a>
        </td>

        <td>
            <a asp-action="Index">
                Дата рождения
            </a>
        </td>

        <td>
            <a asp-action="Index">
                Роль
            </a>
        </td>

    </tr>
    @foreach (var item in Model.Users)
    {
<tr>
    <td>@item.ID</td>

    <td>@item.Email</td>
    <td>@item.Login</td>
    <td>@item.Name</td>
    <td>@item.Surname</td>
    @{
        if (item.BirthDate != null)
        {
            <td>@item.BirthDate.Value.ToShortDateString()</td>
        }
        else
        {
            <td>@item.BirthDate</td>
        }
    }

    <td>@item.Role.Role_Name</td>
    @*@foreach (var role in Model.Roles)
        {
            if (item.RoleID == role.ID)
            {
            <td>@role.Role_Name</td>
            }
        }*@
    <td>
        <a class="btn btn-outline-info" asp-action="Details" asp-controller="home" asp-route-id="@item.ID">Подробнее</a>
        <a class="btn btn-outline-warning" asp-action="Edit" asp-controller="home" asp-route-id="@item.ID">Изменить</a>
        <a class="btn btn-outline-danger" asp-action="Delete" asp-controller="home" asp-route-id="@item.ID">Удалить</a>

    </td>
</tr>
    }
</table>


@if (Model.PageViewModel.HasPreviusPage)
{
    <a asp-action="Index"
       asp-route-page="@(Model.PageViewModel.PageNumber - 1)"
       asp-route-id="@(Model.FilterViewModel.SelectId)"
       asp-route-login="@(Model.FilterViewModel.SelectLogin)"
       asp-route-email="@(Model.FilterViewModel.SelectEmail)"
       asp-route-sortOrder="@(Model.SortViewModel.Current)"
       class=" btn btn-outline-dark">Назад</a>
}

@if (Model.PageViewModel.HasNextPage)
{
    <a asp-action="Index"
       asp-route-page="@(Model.PageViewModel.PageNumber + 1)"
       asp-route-id="@(Model.FilterViewModel.SelectId)"
       asp-route-login="@(Model.FilterViewModel.SelectLogin)"
       asp-route-email="@(Model.FilterViewModel.SelectEmail)"
       asp-route-sortOrder="@(Model.SortViewModel.Current)"
       class=" btn btn-outline-dark">Вперед</a>
}



